---
title: network3
date: 2019-09-15 23:02:52
tags: network
---

# 数据链路层

## 基本概念

### 信道类型

- 点到点信道
- 广播信道


### 链路和数据链路

#### 链路

- 点到点的物理路线段，中间没有任何点
- 一条链路是一条通路的组成部分


#### 数据链路

- 除了物理路线外，还必须有通信协议来控制这些数据的传输。若把实现这些协议的硬件软件加到链路上，就构成了数据链路。
- 最常用的方法就是用适配器（网卡），来协调软硬件
- 一般适配器都包含数据链路层和物理层


### 传输内容

- 帧
- 将网络层的数据装入帧，分为帧的开始和帧的结束。


## 三个基本问题

### 封装成帧

- IP数据报分成帧的数据部分最大不能超过MTU（一般1500字节）
- 然后两头加上帧首部（SOH）和帧尾部(EOT)
- 帧首部开始发送，到帧尾部结束，整个构成数据链路层的帧长
- 必须头尾都收到否则不算完整帧丢弃

### 透明传输

- 如传输ASCII码中不会出问题
- 如传输数据不光可打印字符，可能出现帧首部和帧尾部的二进制表示，导致真正的帧首部或尾部被丢弃，造成数据帧传输错误。
- 所以如果出现上面的情况一般会在数据中的相同表示前加上转义字符通常是ESC，进行完字符填充一般不会出错。
- 如有ESC则需再加个ESC进行转义。
- 以上整个过程对于实际使用者是透明的，自动进行。

### 差错控制

- 误码率(BER)：在一段时间内，传输错误的比特占所传输总比特的比率
- 误码率与信噪比有关
#### 循环冗余检验(CRC)
- 用于差错控制
- 用到二进制的除法
- 除数位数n，余数位数为n-1。所以要在被除数后补n-1位
- 除数越大这个方法越可靠
#### 帧检验序列（FCS）
- 定义：在数据后面添加上的冗余码
- CRC算出来的内容


## 两种情况下使用数据链路层

### 使用点对点

#### PPP协议

- 简单，封装成帧
- 透明性
- 多层网络协议
- 多种类型链路
- 差错检测
- 检测连接状态
- 最大传送单元
- 网络层地址协商
- 数据压缩协商
##### PPP协议帧格式

F　　A　　 C 　协议　　　  信息部分　　　　　FCS　　　Ｆ 

7E　FF　　03　　　　　　　　　　　　　  　　　　　　　7E

1　　１　　１　　２　不超过１５００字节　　　２　　　　１　　　　　　　　　
- FAC协议为首部
- FCSF为尾部
- 协议用来表示信息部分的内容
- 信息部分出现7E进行拆分保证透明性
	- 7E变7D和5E的方式进行字节填充
	- 零比特填充方法次；‘’；；中间插入一个0


### 使用广播信道



## 以太局域网

## 扩展以太网

## 高速以太网     
