---
title: linuxbasic6
date: 2019-08-12 12:45:29
tags: linux
---

# linux计划任务

## crond 任务调度

- 定时调度脚本代码执行
- -e	编辑crontab定时任务
- -l	查询crontab任务
- -r	删除当前用户所有的crontab任务
- 对于简单的任务可以直接在crontab中加入任务即可
- 对于复杂任务需要shell编程（脚本）

### 示例

```
//命令行执行
crontab -e

/**
五个星号分别表示不同的时间
第一个*	一个小时当中的第几分钟	0-59
第二个*	一天当中第几个小时	0-23
第三个* 一个月当中的第几天	1-31
第四个* 一年当中第几个月	1-12
第五个*	一周当中周几		0-7(07都代表周日）
*/

//下面代码代表每小时的每分钟执行ls -l /etc/ > /tmp/to.txt 命令

*/1 * * * * ls -l /etc >> /tmp/to.txt

```
|特殊符号|含义|
|-:-|-:-|
|*|代表任意时间。
|,|代表不连续的时间。比如“0 8,12,16 /***” 命令就代表在每天的8点0分，12点0分，16点0分都执行一次命令|
|-|代表连续的时间范围内。比如"0 5 * * 1-6命令"，代表在周一到周六的凌晨5点0分执行任务|
|*/n|代表每隔多久执行一次。比如“*/10 * * * *命令”，代表每隔10分钟执行一遍命令|	

## 示例

### 每隔一分钟，就将当前日期信息更新追加到~/Desktop/test文件中

1. 先编写一个文件 /home/mytask1.sh
2. mytask1.sh内写：date >> ~/Desktop/test
3. 给mytask1.sh一个可执行权限	chmod 744 /home/mytask1.sh
4. cronteb -e 
5. */1 * * * * /home/mytask1.sh
6. 成功



---


# 分区

- 将磁盘挂载在根目录下的某一个目录中
- lsblk -f	记忆指令方法：老师不离开（记忆有时可以通过输入法给予快速提示，比如：按时交付了撒酒疯 asjflsjf 输入法会给与最合理的匹配，用于快速记忆无规律指令）

## 挂载案例

- 虚拟机增加一块新的硬盘，增加完后重启
- 分区	fdisk /dev/sdb	之后依次选择m n p 1 w
- 格式化	mkfs -t ext4（你要格式化成什么文件类型）  /dev/sdb1(这个是你要格式化的硬盘)
- 挂载	
	- 先创建一个目录用于挂载
	- 挂载 mount /dev/sdb1	挂载目录
	- 重启后会恢复
- 设置可以自动挂载 
	- vim /etc/fstab
	- 编辑 /dev/sdb1			/要挂载的目录		etc4	defaults	0 0
	- 编辑完成后退出	
	- 命令行输入mount -a
	- 重启


## 卸载磁盘

- umount 挂载磁盘名称 or 挂载目录名称


## 磁盘情况查询

- 用于查看磁盘的使用情况
- df -lh


## 查看指定目录磁盘占用情况

- du 
	- -s 指定目录的大小汇总
	- -h 带计量单位
	- -a 含文件
	- -max-depth=1 子目录深度
	- -c 列出明细同时增加汇总值
- 统计目录下有多少文件
	- ls -l /home | grep "^-" | wc -l	ls查看指定目录|过滤出其中的以-开头的文件|wc -l是统计数量 
	- 如果要递归统计 ls -lR ...

---

# 指令

## find

- -name	文件名方式查找	例find /查找目录 -name 查找文件名，可以采用通配符
- -user 查找指定用户名的所有文件
- -size 按照指定文件大小查找文件

## locate指令

- 可以快速定位文件位置
- 第一次运行时必须使用updatedb指令创建locate数据库


---

# 这次课程中遇到问题

- 编辑时碰到触摸板导致卡死，解决方法：菜单栏终端下的只读勾选了，取消即可
- 编辑时误按ctrl + s, 解决办法： ctrl + q 解决
